{"version":3,"sources":["angular-grid-directive.js"],"names":["angular","module","filter","input","start","slice","total","parseInt","i","push","directive","$timeout","restrict","scope","gridTemplateUrl","gridTitleData","gridBodyData","gridPageSize","gridVisiblePagesCount","gridSortEnabled","gridSearchEnabled","gridPagingEnabled","gridColKeys","controller","template","$scope","pageSize","length","console","warn","totalDisplayedPages","isNaN","currentPage","colTitles","data","numberOfPages","Math","ceil","goToPage","selectedPage","$root","$broadcast","firstPage","prevPage","nextPage","lastPage","getPageTostartFrom","totalPages","startFromIndex","changeOrderOfFiled","filedName","orderByFiledName","$on"],"mappings":"AAAAA,QAAAC,OAAA,6BAEAD,QAAAC,OAAA,0BACAC,OAAA,QAAA,WACA,MAAA,UAAAC,EAAAC,GAEA,MADAA,IAAAA,EACAD,EAAAE,MAAAD,MAIAJ,QAAAC,OAAA,0BACAC,OAAA,YAAA,WACA,MAAA,UAAAC,EAAAC,GAEA,MADAA,IAAAA,EACAD,EAAAE,MAAAD,MAIAJ,QAAAC,OAAA,0BACAC,OAAA,QAAA,WACA,MAAA,UAAAC,EAAAG,GACAA,EAAAC,SAAAD,EACA,KAAA,GAAAE,GAAA,EAAAA,EAAAF,EAAAE,IACAL,EAAAM,KAAAD,EACA,OAAAL,MAIAH,QAAAC,OAAA,0BACAS,UAAA,wBAAA,WAAA,SAAAC,GACA,OACAC,SAAA,IACAC,OACAC,gBAAA,IACAC,cAAA,IACAC,aAAA,IACAC,aAAA,IACAC,sBAAA,IACAC,gBAAA,IACAC,kBAAA,IACAC,kBAAA,IACAC,YAAA,KAEAC,WAAA,iBACAC,SAAA,28DAgDAxB,QAAAC,OAAA,0BACAsB,WAAA,kBAAA,SAAA,SAAAE,GAGA,MAAAA,GAAAT,aAIAS,EAAAV,eAIAU,EAAAR,aAGAQ,EAAAC,SAAAD,EAAAR,aAFAQ,EAAAC,SAAAD,EAAAT,aAAAW,OAIA,GAAAF,EAAAN,iBAAA,GAAAM,EAAAN,oBACAS,SAAAC,KAAA,wEAGA,GAAAJ,EAAAL,mBAAA,GAAAK,EAAAL,sBACAQ,SAAAC,KAAA,2EAIAJ,EAAAK,oBAAA,EACAC,MAAAN,EAAAP,yBACAO,EAAAK,oBAAAL,EAAAP,uBAGAO,EAAAO,YAAA,EAEAP,EAAAQ,UAAAR,EAAAV,cACAU,EAAAS,KAAAT,EAAAT,aAEAS,EAAAU,cAAA,WACA,MAAAC,MAAAC,KAAAZ,EAAAS,KAAAP,OAAAF,EAAAC,WAGAD,EAAAa,SAAA,SAAAC,GACAd,EAAAO,aAAAO,IACAd,EAAAO,YAAAO,EACAd,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,eAIAP,EAAAiB,UAAA,WACA,GAAAjB,EAAAO,cACAP,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,aACAP,EAAAO,YAAA,IAGAP,EAAAkB,SAAA,WACAlB,EAAAO,YAAA,IACAP,EAAAO,cACAP,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,eAGAP,EAAAmB,SAAA,WACAnB,EAAAO,YAAA,EAAAP,EAAAU,kBACAV,EAAAO,cACAP,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,eAIAP,EAAAoB,SAAA,WACApB,EAAAO,YAAAP,EAAAU,gBAAA,EACAV,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,cAGAP,EAAAqB,mBAAA,WAEA,GAAA,GAAArB,EAAAK,qBAAAL,EAAAU,iBAAAV,EAAAK,oBACA,MAAA,EAEA,IAAAiB,GAAAtB,EAAAU,gBACAa,EAAAvB,EAAAO,YAAAzB,SAAAkB,EAAAK,oBAAA,EAEA,OAAAkB,IAAA,EACA,EAGAD,EAAAC,EAAAvB,EAAAK,oBACAiB,EAAAtB,EAAAK,oBAEAkB,GAGAvB,EAAAwB,mBAAA,SAAAC,GACAzB,EAAA0B,kBAAA,IAAAD,EACAzB,EAAA0B,iBAAA,IAAAD,EACAzB,EAAA0B,kBAAA,IAAAD,EACAzB,EAAA0B,iBAAA,IAAAD,EAEAzB,EAAA0B,iBAAA,IAAAD,EACAzB,EAAAe,MAAAC,WAAA,iCAAAhB,EAAA0B,uBAGA1B,GAAAe,MAAAY,IAAA,kBAAA,WACA3B,EAAAO,YAAA,EACAP,EAAA0B,iBAAA,GACA1B,EAAAe,MAAAC,WAAA,2BAAAhB,EAAAO,qBA7FAJ,SAAAC,KAAA,oEAJAD,SAAAC,KAAA","file":"angular-grid-directive.min.js","sourcesContent":["angular.module('angular-grid-directive', []); \r\n\r\nangular.module('angular-grid-directive')\r\n\t.filter('range', function() {\r\n\t\treturn function(input, start) {\r\n\t\t\tstart = +start; //parse to int\r\n\t\t\treturn input.slice(start);\r\n\t\t};\r\n\t});\r\n\r\nangular.module('angular-grid-directive')\r\n\t.filter('startFrom', function() {\r\n\t\treturn function(input, start) {\r\n\t\t\tstart = +start; //parse to int\r\n\t\t\treturn input.slice(start);\r\n\t\t};\r\n\t});\r\n\r\nangular.module('angular-grid-directive')\r\n\t.filter('range', function() {\r\n\t\treturn function(input, total) {\r\n\t\t\ttotal = parseInt(total);\r\n\t\t\tfor (var i=0; i<total; i++)\r\n\t\t\t\tinput.push(i);\r\n\t\t\treturn input;\r\n\t\t\t};\r\n\t\t});\r\n\r\nangular.module('angular-grid-directive')\r\n\t.directive('angularGridDirective',['$timeout', function ($timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n            \tgridTemplateUrl: '=',\r\n        \t\tgridTitleData: '=',\r\n        \t\tgridBodyData: '=',\r\n        \t\tgridPageSize: '=',\r\n        \t\tgridVisiblePagesCount: '=',\r\n        \t\tgridSortEnabled: '=',\r\n        \t\tgridSearchEnabled: '=',\r\n    \t\t\tgridPagingEnabled: '=',\r\n    \t\t\tgridColKeys: '='\r\n            },\r\n            controller: 'gridController',\r\n            template: '<!-- Search + table -->'+\r\n\t\t\t\t\t'<div class=\"panel panel-default\">'+ \r\n\t\t\t\t\t'\t<div class=\"panel-heading\">'+\r\n\t\t\t\t\t'\t\t<input data-ng-show=\"gridSearchEnabled\" placeholder=\"Search..\" type=\"text\" data-ng-model=\"searchWord\" placeholder=\"\" style=\"width:100%;\"/>'+\r\n\t\t\t\t\t'\t</div>'+ \r\n\t\t\t\t\t'\t<table class=\"table\">'+ \r\n\t\t\t\t\t'\t\t<thead>'+ \r\n\t\t\t\t\t'\t\t\t<tr>'+ \r\n\t\t\t\t\t'\t\t\t\t<th data-ng-repeat=\"item in colTitles\" data-ng-class=\"item.key\">'+\r\n\t\t\t\t\t'\t\t\t\t\t<div data-ng-class=\"{ \\'sorted-header\\' : item.sortable, \\'sort-desc\\': orderByFiledName == \\'-\\' + item.key, \\'sort-asc\\': orderByFiledName == \\'+\\' + item.key }\">'+\r\n\t\t\t\t\t'\t\t\t\t\t\t<a href=\"#\" data-ng-click=\"item.sortable && changeOrderOfFiled(item.key)\">{{item.title}}</a>'+\r\n\t\t\t\t\t'\t\t\t\t\t</div>'+ \r\n\t\t\t\t\t'\t\t\t\t</th>'+\r\n\t\t\t\t\t'\t\t\t</tr>'+ \r\n\t\t\t\t\t'\t\t</thead>'+ \r\n\t\t\t\t\t'\t\t<tbody>'+ \r\n\t\t\t\t\t'\t\t\t<tr data-ng-repeat=\"item in data | filter:searchWord | orderBy:orderByFiledName | startFrom:currentPage*pageSize | limitTo:pageSize\">'+\r\n\t\t\t\t\t'\t\t\t\t<td data-ng-repeat=\"colItem in colTitles\" data-custom-table-cell-render-directive=\"{{colItem.key}}\" data-row-data=\"item\">{{item[colItem.key]}}</td>'+ \r\n\t\t\t\t\t'\t\t\t</tr>'+ \r\n\t\t\t\t\t'\t\t</tbody>'+ \r\n\t\t\t\t\t'\t</table>'+ \r\n\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t'<!-- Paging -->'+\r\n\t\t\t\t\t'<div data-ng-show=\"gridPagingEnabled==true\" style=\"direction: ltr;\">'+\t\r\n\t\t\t\t\t'\t<ul class=\"pagination\">'+ \r\n\t\t\t\t\t'\t\t<li class=\"\">'+\r\n\t\t\t\t\t'\t\t\t<a href=\"\" data-ng-click=\"firstPage()\" title=\"First\"><<</a>'+ \r\n\t\t\t\t\t'\t\t</li>'+ \r\n\t\t\t\t\t'\t\t<li class=\"\">'+\t \r\n\t\t\t\t\t'\t\t\t<a href=\"\" data-ng-click=\"prevPage()\" title=\"Previous\"><</a>'+ \r\n\t\t\t\t\t'\t\t</li>'+ \r\n\t\t\t\t\t'\t\t<li class=\"{{n == currentPage ? \\'active\\': \\'\\'}}\" data-ng-if=\"totalDisplayedPages > 0\" data-ng-repeat=\"n in [] | range:numberOfPages() | startFrom:getPageTostartFrom() | limitTo:totalDisplayedPages\">'+\t \r\n\t\t\t\t\t'\t\t\t<a href=\"#\" data-ng-click=\"goToPage(n)\">{{n+1}}</a>'+ \r\n\t\t\t\t\t'\t\t</li>'+ \r\n\t\t\t\t\t'\t\t<li class=\"{{n == currentPage ? \\'active\\': \\'\\'}}\" data-ng-if=\"totalDisplayedPages == 0\" data-ng-repeat=\"n in [] | range:numberOfPages()\">'+\t \r\n\t\t\t\t\t'\t\t\t<a href=\"#\" data-ng-click=\"goToPage(n)\">{{n+1}}</a>'+ \r\n\t\t\t\t\t'\t\t</li>'+ \r\n\t\t\t\t\t'\t\t<li class=\"\" >'+\t \r\n\t\t\t\t\t'\t\t\t<a href=\"\" data-ng-click=\"nextPage()\" title=\"Next\">></a>'+ \r\n\t\t\t\t\t'\t\t</li>'+ \r\n\t\t\t\t\t'\t\t<li class=\"\" >'+\r\n\t\t\t\t\t'\t\t\t<a href=\"\" data-ng-click=\"lastPage()\" title=\"Last\">>></a>'+ \r\n\t\t\t\t\t'\t\t</li>'+\t\r\n\t\t\t\t\t'\t</ul>'+\r\n\t\t\t\t\t'</div>'\r\n        };\r\n    }]);\r\n\r\nangular.module('angular-grid-directive')\r\n\t.controller('gridController',[ '$scope', function ($scope) {\r\n\t\r\n\t\t//verify data attributes\r\n\t\tif (!$scope.gridBodyData){\r\n\t\t\tconsole.warn('hrlGridDirective - no grid-body-data attribute was provider');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!$scope.gridTitleData){\r\n\t\t\tconsole.warn('hrlGridDirective - no grid-title-data attribute was provider');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!$scope.gridPageSize){\r\n\t\t\t$scope.pageSize = $scope.gridBodyData.length;\r\n\t\t} else {\r\n\t\t\t$scope.pageSize = $scope.gridPageSize;\r\n\t\t}\r\n\t\tif ($scope.gridSortEnabled != true && $scope.gridSortEnabled != false){\r\n\t\t\tconsole.warn('hrlGridDirective - grid-sort-enabled attribute must be true || false');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ($scope.gridSearchEnabled != true && $scope.gridSearchEnabled != false){\r\n\t\t\tconsole.warn('hrlGridDirective - grid-search-enabled attribute must be true || false');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t$scope.totalDisplayedPages = 0;\r\n\t\tif (!isNaN($scope.gridVisiblePagesCount)) {\r\n\t\t\t$scope.totalDisplayedPages = $scope.gridVisiblePagesCount;\r\n\t\t}\r\n\t\t\r\n\t\t$scope.currentPage = 0;\r\n\r\n\t\t$scope.colTitles = $scope.gridTitleData;\r\n\t\t$scope.data = $scope.gridBodyData;\r\n\t\t\r\n\t\t$scope.numberOfPages=function(){\r\n\t\t\treturn Math.ceil($scope.data.length/$scope.pageSize);                \r\n\t\t};\r\n\t\t\r\n\t\t$scope.goToPage = function(selectedPage){\r\n\t\t\tif ($scope.currentPage != selectedPage) {\r\n\t\t\t\t$scope.currentPage = selectedPage;\r\n\t\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t$scope.firstPage = function(){\r\n\t\t\tif ($scope.currentPage != 0) {\r\n\t\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t\t\t$scope.currentPage = 0;\r\n\t\t\t}\r\n\t\t};\r\n\t\t$scope.prevPage = function() {\r\n\t\t\tif ($scope.currentPage > 0) {\r\n\t\t\t\t$scope.currentPage--;\r\n\t\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t\t}\r\n\t\t};\r\n\t\t$scope.nextPage = function() {\r\n\t\t\tif ($scope.currentPage+1 < $scope.numberOfPages()) {\r\n\t\t\t\t$scope.currentPage++;\r\n\t\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t$scope.lastPage = function(){\r\n\t\t\t$scope.currentPage = $scope.numberOfPages()-1;\r\n\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t};\r\n\t\t\r\n\t\t$scope.getPageTostartFrom = function() {\r\n\r\n\t\t\tif ($scope.totalDisplayedPages == 0 || $scope.numberOfPages() <= $scope.totalDisplayedPages)\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\tvar totalPages = $scope.numberOfPages();\r\n\t\t\tvar startFromIndex = $scope.currentPage - parseInt($scope.totalDisplayedPages / 2);\r\n\t\t\t// below - bad\r\n\t\t\tif (startFromIndex <= 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\t// above - bad\r\n\t\t\tif (totalPages - startFromIndex < $scope.totalDisplayedPages) {\r\n\t\t\t\treturn totalPages - $scope.totalDisplayedPages;\r\n\t\t\t}\r\n\t\t\treturn startFromIndex;\r\n\t\t};\r\n\t\t\r\n\t\t$scope.changeOrderOfFiled = function(filedName){\r\n\t\t\tif ($scope.orderByFiledName == '+' + filedName)\r\n\t\t\t\t$scope.orderByFiledName = '-' + filedName;\r\n\t\t\telse if ($scope.orderByFiledName == '-' + filedName)\r\n\t\t\t\t$scope.orderByFiledName = '+' + filedName;\r\n\t\t\telse\r\n\t\t\t\t$scope.orderByFiledName = '+' + filedName;\r\n\t\t\t$scope.$root.$broadcast('gridControllerFieldOrderChange', $scope.orderByFiledName);\r\n\t\t};\r\n\t\t\r\n\t\t$scope.$root.$on('resetGridSystem', function() {\r\n\t\t\t$scope.currentPage = 0;\r\n\t\t\t$scope.orderByFiledName = '';\r\n\t\t\t$scope.$root.$broadcast('gridControllerPageChange', $scope.currentPage);\r\n\t\t});    \r\n\t}]);\r\n\r\n\r\n\r\n\r\n"]}